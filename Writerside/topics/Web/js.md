# Observer Api 区别，作用和应用场景


### IntersectionObserver（交叉观察器）
- 区别：

主要用于观察目标元素与祖先元素或视口（viewport）的交叉状态变化。它关注的是元素是否进入、离开或者在交叉区域内移动等情况。
- 作用：

实现懒加载。例如，当图片进入浏览器视口时才加载图片，这样可以提高页面的初始加载速度。通过创建IntersectionObserver实例，设置观察的目标元素和回调函数，当目标元素与视口交叉状态发生变化时，回调函数就会被触发，从而可以在元素进入视口时加载图片资源。
无限滚动加载。可以观察列表底部的元素，当它进入视口时，触发加载下一批数据的操作，给用户提供流畅的滚动体验。
- 应用场景：

在网页布局中，用于实现滚动动画。比如，当一个带有动画效果的元素滚动到视口内时，触发动画的播放，使动画效果更加合理地展示，避免在元素不可见时就开始播放动画而浪费资源。

### MutationObserver（变动观察器）
- 区别：
 
它专注于监视 DOM 树的变化。能够观察 DOM 节点的属性变化、子节点的添加或删除、文本内容的修改等多种类型的变化。
- 作用：

可以用于实现数据双向绑定的简单版本。例如，在一个小型的表单应用中，当用户修改了输入框（`<input>`）中的文本内容，MutationObserver可以捕获到这个变化，然后更新与之绑定的数据模型。
实时监控 DOM 结构的更新。在一些具有动态内容加载的网页中，如网页聊天应用，新消息的添加会改变 DOM 结构，通过MutationObserver可以及时获取这些变化并更新界面。
- 应用场景：

在构建可视化编辑器时，当用户在编辑器中添加、删除或者修改元素（如添加一个新的段落、删除一个图片、修改文字的样式）时，MutationObserver可以感知这些变化，以便进行实时保存或者提供撤销 / 重做功能。

### ResizeObserver（大小观察器）

- 区别：

专门用于观察元素的大小变化。无论是因为窗口大小调整、元素内部内容的变化导致元素尺寸改变，还是通过 CSS 样式动态修改元素大小，它都能检测到。
- 作用：

在响应式设计中，当窗口大小改变时，可以让布局中的元素根据新的尺寸进行自适应调整。例如，一个具有弹性布局的侧边栏，当窗口大小变化时，ResizeObserver可以检测到侧边栏容器大小的变化，从而调整侧边栏内元素的大小和位置，保证布局的合理性。
对于一些具有可伸缩功能的组件，如可拉伸的文本区域，ResizeObserver可以实时监测其大小变化，根据新的大小调整相关的样式或者功能。
- 应用场景：

在构建复杂的图表组件时，当图表容器的大小改变时，ResizeObserver可以触发图表的重新绘制，以确保图表能够正确地填充容器，并且保持合适的比例和显示效果。
### PerformanceObserver（性能观察器）
- 区别：

主要关注浏览器的性能相关指标。它可以收集和观察如资源加载时间、脚本执行时间、渲染时间等性能数据。

- 作用：

用于性能分析和优化。例如，可以观察页面中各个资源（如 JavaScript 文件、CSS 文件、图片等）的加载性能。通过PerformanceObserver收集这些资源的加载时间数据，分析哪些资源加载过慢，从而采取相应的优化措施，如压缩文件、调整加载顺序等。
可以测量关键渲染路径（CRP）相关的性能指标。了解首次绘制（FP）和首次内容绘制（FCP）的时间，帮助开发者优化页面加载体验，减少白屏时间和用户等待时间。

- 应用场景：

在大型单页应用（SPA）的开发中，用于监控各个路由切换时的性能损耗。当用户从一个页面切换到另一个页面时，PerformanceObserver可以记录页面组件的加载和渲染时间，找出性能瓶颈，优化页面切换的流畅性。
### ReportingObserver（报告观察器）
- 区别：

用于观察浏览器的各种报告，包括但不限于违反安全策略（如 CSP - 内容安全策略）的报告、用户交互可能导致的隐私问题报告等。
- 作用：

增强网页的安全性和合规性。当网页的内容或行为违反了浏览器的安全策略或者隐私规则时，ReportingObserver可以捕获相关报告，开发者可以根据这些报告进行修复，避免安全漏洞或者隐私泄露问题。
- 应用场景

在处理用户敏感数据的金融类网站或者医疗健康类网站中，用于监控可能出现的安全和隐私问题。例如，当一个脚本尝试跨域访问被禁止的资源（违反 CSP）时，ReportingObserver可以捕获这个违规报告，及时通知开发者采取措施。